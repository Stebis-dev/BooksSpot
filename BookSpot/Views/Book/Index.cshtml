@*@model IEnumerable<Book>*@
@*// create new model with book list and simple list*@

@model BookView

@{
    ViewData["Title"] = "Book list";
}
<div class="container p-3">
    <div class="row pt-4">
        <div class="col-6">
            <h2 class="text-primary">Book list</h2>
        </div>
     <div class="col-6 text-end">
            <a asp-controller="Book" asp-action="Add" class="btn btn-primary">
                <i class="bi bi-plus-square"></i>&nbsp;&nbsp;Add new book 
            </a>
        </div>
    </div>
    
    <div>
        <button class="btn btn-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
            <i class="bi bi-funnel"></i>&nbsp;&nbsp;Filter
        </button>
        <div class="collapse" id="collapseExample">
            <div class="card card-body">

                @using (Html.BeginForm("FilterBooks", "Book", FormMethod.Post))
                {
                    <table class="table-borderless table-sm" style="width:100%">
                        <tbody>
                            <tr>
                                <td width="50%">
                                    <div class="mb-3">
                                        <label asp-for="Filter.BookTitle">Book Title</label>
                                        <input asp-for="Filter.BookTitle" class=" form-control" />
                                    </div>
                                </td>
                                <td width="50%">
                                    <div class="mb-3">
                                        <label asp-for="Filter.Author" >Author</label>
                                        <input asp-for="Filter.Author" class=" form-control" />
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td width="50%">
                                    <div class="mb-3">
                                        <label asp-for="Filter.Genre">Genre</label>
                                        <input asp-for="Filter.Genre" class="form-control" />
                                    </div>
                                </td>
                                <td width="50%">
                                </td>
                            </tr>
                            <tr>
                                <td width="50%">
                                    <div class="mb-3">
                                        <label asp-for="Filter.Publisher">Publisher</label>
                                        <input asp-for="Filter.Publisher" class="form-control" />
                                    </div>
                                </td>
                                <td width="50%">
                                    <div class="mb-3">
                                        <label asp-for="Filter.PublishingDate">Published date</label>
                                        <input asp-for="Filter.PublishingDate" class="form-control" />
                                    </div>
                                </td>
                            </tr>
                            
                            <tr>
                                <td colspan="2">
                                    <hr />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="mb-4">
                                        <label asp-for="Filter.ISBNcode">ISBN code</label>
                                        <input asp-for="Filter.ISBNcode" class="form-control" />
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <button type="submit" class="btn btn-primary" style="width:150px">Apply</button>
                    <a asp-controller="Book" asp-action="Index" class="btn btn-secondary" style="width:150px">Clear</a>
                }
            </div>
        </div>
    </div>
    <br />
    <table class="table table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>
                    Book
                </th>
                <th>
                    Publisher
                </th>
                <th>
                    Status
                </th>
                <th>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var obj in Model.Books)
            {
                <tr>
                    <td width="40%">
                        <div>
                            <h4>"@obj.BookTitle"</h4>
                            By: @obj.Author
                        </div>
                        <div>
                            Genre: @obj.Genre
                        </div>
                        ISBN @obj.ISBNcode
                    </td>
                    <td width="30%">
                        <div>
                            @obj.Publisher
                        </div>
                        <div>
                            @obj.PublishingDate.ToShortDateString()
                        </div>
                    </td>
                    <td>
                        Unkown
                    </td>
                    <td class="col text-center">
                        <div class="col justify-content-center">
                            <a asp-controller="Book" asp-action="Edit" asp-route-id="@obj.Id"
                            class="btn btn-primary mx-auto w-fill"><i class="bi bi-pencil-square"></i>&nbsp;&nbsp;Edit</a>

                            <a asp-controller="Book" asp-action="Delete" asp-route-id="@obj.Id"
                            class="btn btn-danger mx-auto w-fill"><i class="bi bi-trash"></i>&nbsp;&nbsp;Delete</a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>

    </table>
</div>